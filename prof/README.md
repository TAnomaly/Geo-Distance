# Coordinate Distance Calculator\n\nA C-based REST API and CLI tool to calculate the distance between two geographic coordinates using the Haversine formula. Results are stored in a PostgreSQL database.\n\n## Tech Stack\n\n- **Language**: C (ISO C99)\n- **Web Framework**: libmicrohttpd (for REST API)\n- **Database**: PostgreSQL\n- **JSON Library**: json-c\n- **Build System**: Make\n\n## Features\n\n- Calculate distance between two points (km).\n- Store results in PostgreSQL.\n- Two interfaces:\n  - REST API (HTTP POST).\n  - CLI (interactive terminal).\n\n## Project Structure\n\n```\nprof/\n├── Makefile\n├── src/\n│   ├── api_server.c       # HTTP server\n│   ├── cli_main.c         # CLI entry point\n│   ├── coordinate_logger.c # Core logic (Haversine + DB)\n│   ├── coordinate_logger.h # Function declarations\n│   └── api.h              # API headers\n└── build/\n    ├── coordinate_logger  # CLI executable\n    └── api_server         # API executable\n```\n\n## Endpoints\n\n### POST `/calculate-distance`\n\nCalculate the distance between two geographic points.\n\n#### Request Body (JSON)\n\n```json\n{\n  \"name1\": \"Istanbul\",\n  \"lat1\": 41.0151,\n  \"lon1\": 28.9795,\n  \"name2\": \"Ankara\",\n  \"lat2\": 39.9334,\n  \"lon2\": 32.8597\n}\n```\n\n#### Response (JSON)\n\n```json\n{\n  \"distance\": 419.45,\n  \"unit\": \"km\"\n}\n```\n\n## CLI Usage\n\n```bash\n./build/coordinate_logger\n```\n\n## API Usage\n\n### Start Server\n\n```bash\n./build/api_server\n```\n\n### Test with cURL\n\n```bash\ncurl -X POST http://localhost:8080/calculate-distance \\\n  -H \"Content-Type: application/json\" \\\n  -d '{ \"name1\": \"Istanbul\", \"lat1\": 41.0151, \"lon1\": 28.9795, \"name2\": \"Ankara\", \"lat2\": 39.9334, \"lon2\": 32.8597 }'\n```\n\n## Database Schema\n\n```sql\nCREATE TABLE coordinates (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    first_name VARCHAR(100),\n    first_lat DOUBLE PRECISION,\n    first_lon DOUBLE PRECISION,\n    second_name VARCHAR(100),\n    second_lat DOUBLE PRECISION,\n    second_lon DOUBLE PRECISION,\n    distance DOUBLE PRECISION\n);\n```\n\n## Build Instructions\n\n```bash\nmake clean\nmake\n```\n\n## Requirements\n\n- PostgreSQL (`libpq-dev`)\n- libmicrohttpd (`libmicrohttpd-dev`)\n- json-c (`libjson-c-dev`)\n- GCC\n\n## License\n\nMIT